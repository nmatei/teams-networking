(()=>{"use strict";function e(e){return new Promise((t=>{setTimeout((()=>{t(`odihnit ${e/1e3}sec`)}),e)}))}function t(e){return document.querySelector(e)}let n,o,a=[];function s(e){o!==e?(o=e,document.querySelector("#teams tbody").innerHTML=function(e){return e.map((({promotion:e,members:t,name:n,url:o,id:a})=>`\n      <tr>\n        <td>${e}</td>\n        <td>${t}</td>\n        <td>${n}</td>\n        <td>\n          <a href="${o}" target="_blank">${o.replace("https://github.com/","")}</a>\n        </td>\n        <td>\n          <a data-id="${a}" class="remove-btn">âœ–</a>\n          <a data-id="${a}" class="edit-btn">&#9998;</a>\n        </td>\n      </tr>`)).join("")}(e)):console.warn("same teams to display",o,e)}function d(){fetch("http://localhost:3000/teams-json",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{a=e,console.info(e),s(e)}))}async function i(e){e.preventDefault();const t={promotion:document.getElementById("promotion").value,members:document.getElementById("members").value,name:document.getElementById("name").value,url:document.getElementById("url").value};let o={success:!1};n?(t.id=n,o=await function(e){return fetch("http://localhost:3000/teams-json/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}(t),o.success&&(a=a.map((e=>e.id===t.id?{...e,...t}:e)))):(o=await function(e){return fetch("http://localhost:3000/teams-json/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}(t),o.success&&(t.id=o.id,a=[...a,t])),o.success&&(s(a),e.target.reset())}d(),function(){const e=t("#editForm");e.addEventListener("submit",i),e.addEventListener("reset",(()=>{n=void 0})),t("#search").addEventListener("input",(e=>{var t;s((t=e.target.value,a.filter((e=>e.promotion.indexOf(t)>-1)))),console.info("search")})),t("#teams tbody").addEventListener("click",(async e=>{if(e.target.matches("a.remove-btn")){const t=e.target.dataset.id,n=await function(e){return fetch("http://localhost:3000/teams-json/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>e.json()))}(t);n.success&&d()}else e.target.matches("a.edit-btn")&&function(e){const t=a.find((t=>t.id===e));n=e,function({promotion:e,members:t,name:n,url:o}){document.getElementById("promotion").value=e,document.getElementById("members").value=t,document.getElementById("name").value=n,document.getElementById("url").value=o}(t)}(e.target.dataset.id)}))}(),console.info("sleep"),e(2e3).then((e=>{console.info("done1",e)})),console.warn("after sleep"),(async()=>{console.info("sleep2");var t=await e(5e3);console.warn("done2",t)})()})();